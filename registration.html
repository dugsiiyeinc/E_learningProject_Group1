<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-learning website</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- <link rel="stylesheet" href="registration.css" /> -->
    <link rel="stylesheet" href="css/StudentDash.css">
    <link rel="stylesheet" href="css/Login.css">
  </head>
  <body>
    <header>
      <div class="hamburger">
        <i class="fa-solid fa-bars-staggered" data-visible="true"></i>
        <i class="fa-solid fa-xmark" data-visible="false"></i>
      </div>
      <nav class="desktop-menu">
        <div class="logo">
          <img src="images/logoooooooooooooo.png" alt="Logo" />
        </div>
        <ul class="navbar">
          <li><a href="index.html">Home</a></li>
          <li><a href="courses.html">Courses</a></li>
          <li><a href="aboutUs.html">AboutUs</a></li>
          <li><a href="contact.html">ContactUs</a></li>
        </ul>
        <div class="btn">
          <div id="user-dash">aki</div>
          <a href="login.html" id="signIn">Sign In</a>
          <a href="registration.html" id="signUp">Sign Up</a>
          <a href="#" id="Logout" style="display: none;">Logout</a>
        </div>
      </nav>
      <div class="mobile-menu">
        <div class="logo">
          <a href="/index.html">
            <img src="images/logoooooooooooooo.png" alt="Logo" />
          </a>
        </div>
        <div class="menu-link" data-visible="false">
          <div class="menu">
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="courses.html">Courses</a></li>
              <li><a href="aboutUs.html">AboutUs</a></li>
              <li><a href="contact.html">ContactUs</a></li>
            </ul>
            <div class="btn">
              <a href="login.html" id="sign-in">Sign In</a>
              <a href="registration.html" id="signUp">Sign Up</a>
              <a href="#" id="Logout" style="display: none;">Logout</a>
            </div>
          </div>
        </div>
      </div>
    </header>

   
    <section>
      <div class="auth-container">
        <h1 id="form-title">Registration Form</h1>
          <form id="authForm">
           
           
            <!-- <label>Full name</label> -->
            
            <!-- <input type="text" class="fullname" placeholder="Enter full Name" required /> -->
            <input type="text" id="fullname" placeholder="Enter Full Name" required />

            <!-- <label>User name</label> -->
            <!-- <input type="text" class="fullname" placeholder="Enter full Name" required /> -->
            <input type="text" id="username" placeholder="Enter user Name" required />

            <!-- <label>Email</label> -->
            <input type="email" class="email" placeholder="Enter Email" required />

            <!-- <label>password</label> -->
            <input
              type="password"
              class="password" required
              placeholder="Enter your password"
            />

            <!-- <label>confirm password</label> -->
            <input
              type="password" required
              class="confirm-password" 
              placeholder="confirm password"
            />
            <button class="submit" type="submit">Submit</button>
           
          </form>
          <p id="authSwitch">
            I have an account?  <a href="login.html">sign in</a>
          </p>
          
      
      </div>
    </section>

    <footer>
      <p>&copy; Team dugsiiye</p>
    </footer>

    <script>
      const submitbtn = document.querySelector(".submit");
      let accountinfo = document.querySelector(".account-info");
      let account = document.querySelector(".account");
      let allbtn = document.querySelectorAll(".allbtn");
      const fullName = document.querySelector("#fullname")
      const username = document.querySelector("#username");
      const span = document.querySelector(".span");
      const email = document.querySelector(".email");
      const password = document.querySelector(".password");
      const confirmpassword = document.querySelector(".confirm-password");
     

      submitbtn.addEventListener("click", (e) => {
        e.preventDefault();

        function isValidEmail(email) {
          // Regular expression to match email format
          const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

          // Check if the email matches the regular expression
          return regex.test(email);
        }
        const emailval = email.value;
        let validemail;
        const isValid = isValidEmail(emailval);
        validemail=emailval

        if (
          fullName.value == "" ||
          username.value == "" ||
          email.value == "" ||
          confirmpassword.value == "" ||
          password.value == ""
        ) {
          Swal.fire({
            title: "Please enter full informatin",
            // icon: 'question',
            // iconHtml: '؟',
            confirmButtonText: "ok"
          });
 
     
        } 
        else if(isValid !==true){
          Swal.fire({
              title: "Please enter correct email",
              // icon: 'question',
              // iconHtml: '؟',
              confirmButtonText: "ok"
            });
        }
        else if (password.value !== confirmpassword.value) {
          Swal.fire({
            title: "plz match passwords",
            // icon: 'question',
            // iconHtml: '؟',
            confirmButtonText: "ok"
          });
    
       
        } else {
          let myData = {
            // fullname: fullname.value,
            fullname: fullName.value,
            username: username.value,
            email: validemail,
            password: password.value,
            confirmpassword: confirmpassword.value,
            enrolledCourses: []
          };
          
          let data = [];
          data = JSON.parse(localStorage.getItem("users")) || [];
          
          if (
            data.some((data) => {
              return data.email == email.value;
            })
          ) {
            Swal.fire({
              title: "duplicate data",
              // icon: 'question',
              // iconHtml: '؟',
              confirmButtonText: "ok"
            });
          } else {
            data.push(myData);
            localStorage.setItem("users", JSON.stringify(data));

            window.location.href = "login.html";
          }
        }
      });
      span.addEventListener("click", () => {
        window.location.href = "login.html";
      });

      let userdata = JSON.parse(localStorage.getItem("onlineUser"));

      // if (userdata) {
      //   let currentusername = document.querySelector("#user-dash");
      //   currentusername.innerText = userdata.username;
        // account.innerText = userdata.fullname.charAt(0);
      //   allbtn.forEach((element) => {
      //     element.classList.add("hide");

      //     account.classList.remove("hide");
      //   });
      // } else {
      //   allbtn.forEach((element) => {
      //     element.classList.remove("hide");

      //     account.classList.add("hide");
      //   });
      // }
      // account.addEventListener("click", function () {
      //   accountinfo.classList.toggle("hide");
      // });

      // let bars = document.querySelector(".bars i");
      // let left = document.querySelector(".left");
      // bars.onclick = () => {
      //   bars.classList.toggle("fa-xmark");
      //   left.classList.toggle("open");
      // };
    </script>
    <!-- <script src="js/NewUser.js"></script> -->
  </body>
  <script src="js/menu.js"></script>
  <script src="js/main.js"></script>
</html>
